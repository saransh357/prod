<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RVU Major Project | Phone-as-Webcam</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
<div class="container">

    <div class="header">
        <div class="badge">RV University ¬∑ Major Project</div>
        <h1 class="title">Phone-to-Webcam<br>Stream Utility</h1>
        <div class="meta">
            <span class="meta-chip highlight">Saransh Kumar</span>
            <span class="meta-chip">1RVU22BSC090</span>
            <span class="meta-chip">Computer Science</span>
        </div>
    </div>

    <div class="card">
        <div class="card-label">// Stream Control</div>
        <div class="mode-tabs">
            <button class="tab active" id="tab-broadcast" onclick="setMode('broadcast')">üì° Broadcast (Phone)</button>
            <button class="tab" id="tab-watch" onclick="setMode('watch')">üì∫ Watch (PC)</button>
        </div>
        <div class="input-row">
            <input type="password" id="stream-pass" class="input-field" placeholder="Enter stream password / room key">
        </div>
        <div id="panel-broadcast" class="btn-row">
            <button class="btn btn-blue"   onclick="startBroadcast('environment')">üì∑ Back Camera</button>
            <button class="btn btn-purple" onclick="startBroadcast('user')">ü§≥ Front Camera</button>
            <button class="btn btn-ghost"  onclick="stopStream()">‚èπ Stop</button>
        </div>
        <div id="panel-watch" class="btn-row" style="display:none;">
            <button class="btn btn-blue" onclick="startWatching()">üì∫ Connect &amp; Watch</button>
            <button class="btn btn-ghost" onclick="stopStream()">‚èπ Disconnect</button>
        </div>
        <div class="log" id="log">Waiting for action...</div>
    </div>

    <div class="card">
        <div class="card-label">// Live Feed</div>
        <div class="video-wrap">
            <video id="webcam-feed" autoplay muted playsinline></video>
            <div class="video-overlay" id="video-overlay">NO SIGNAL</div>
            <div class="status-bar">
                <div class="status-pill">
                    <div class="dot" id="status-dot"></div>
                    <span id="status-text">OFFLINE</span>
                </div>
                <button class="btn btn-ghost" style="pointer-events:all; padding:4px 10px; font-size:0.7rem;" onclick="toggleFullscreen()">‚õ∂ FS</button>
            </div>
        </div>
        <div class="instructions">
            <details>
                <summary>How to use this utility</summary>
                <div class="instruction-body">
                    <ol>
                        <li>Open this page on your <strong>phone</strong> and your <strong>PC</strong> ‚Äî both on the same WiFi or hotspot.</li>
                        <li>Both devices enter the <strong>same password</strong>.</li>
                        <li>Phone: select <strong>Broadcast</strong> tab ‚Üí tap Back or Front camera ‚Üí allow permissions.</li>
                        <li>PC: select <strong>Watch</strong> tab ‚Üí tap <strong>Connect &amp; Watch</strong>.</li>
                        <li>The live stream will appear within a few seconds.</li>
                        <li>For OBS: add a <strong>Browser Source</strong> pointing to this page on the PC.</li>
                    </ol>
                </div>
            </details>
        </div>
    </div>

    <div class="footer">¬© 2024 SARANSH KUMAR ¬∑ RV UNIVERSITY ¬∑ ALL RIGHTS RESERVED</div>
</div>

<script src="main.js"></script>
</body>
</html>
